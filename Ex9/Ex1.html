<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Exercicios de JS 9</title>
    <meta charset="utf-8">
</head>

<body>

    <header>
        <h1>Exercicios de JS 9 - EX 1 - Ajax</h1>
    </header>

    <main>
        <section>
            <div>
                <span>CEP:</span>
                <input type="text" id="cep" class="">
                <input type="button" value="Enviar" onclick="buscar()">
            </div>

            <div>
                <span>END:</span>
                <input type="text" id="end" class="">
            </div>

            <div>
                <span>Bairro:</span>
                <input type="text" id="bairro" class="">
            </div>
        </section>

        <script>

            function buscar()
            {
                
                var cep = document.getElementById('cep').value;
                var params = "cep=" + cep;
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function () 
                {
                    if (this.readyState == 4 && this.status == 200) 
                    {
                        var resposta = JSON.parse(this.responseText);
                        
                        document.getElementById('end').value = resposta.end;
                        document.getElementById('bairro').value = resposta.bairro;
                    }
                }

                // MODO GET
                xmlhttp.open("GET", "Ex1.php?" + params,true);
                xmlhttp.send();
            }
                   
        </script>         
    </main>

    <footer>
        <div> <a href="index.html">Voltar ao inicio</a> </div>
    </footer>
</body>
</html>