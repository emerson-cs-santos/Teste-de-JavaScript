<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Exercicios de JS 9</title>
    <meta charset="utf-8">
</head>

<body>

    <header>
        <h1>Exercicios de JS 9 - EX 1 - Ajax</h1>
    </header>

    <main>
        <section>
            <form id='form_produtos' enctype="multipart/form-data" >
                <input id="produtos_digitar_inputfile" class="form-control" type="file" name="myFile" accept="image/png, image/jpeg, image/jpg"" >
            </form>
            <input type="button" value="Enviar" onclick="enviar()">
        </section>

        <script>

            function enviar()
            {
                var formData = new FormData();
                
                formData.append("username", "Groucho");
                
                var imagem = document.getElementById('produtos_digitar_inputfile');
                formData.append("myFile", imagem.files[0]);                
                
              //  var params = "teste=" + 'teste';
                    
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.onreadystatechange = function () 
                {
                    if (this.readyState == 4 && this.status == 200) 
                    {
                        var resposta = this.responseText;
                        console.log (resposta);
                        

                    }
                }

                // MODO GET
              //  xmlhttp.open("GET", "Teste.php?" + params,true);
               // xmlhttp.send();
                
                xmlhttp.open("POST", "Teste.php");
                //xmlhttp.setRequestHeader ("Content-Type","multipart/form-data")
                xmlhttp.send(formData);                
            }
                   
        </script>         
    </main>

    <footer>
        <div> <a href="index.html">Voltar ao inicio</a> </div>
    </footer>
</body>
</html>